(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{3520:function(e,t,r){Promise.resolve().then(r.bind(r,6428))},6428:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(7437),s=r(2265),l=r(9376),o=r(7648),d=r(1837),n=r(9064),i=r(1217),c=r(7569),m=r(4929),x=r(9121),u=r(6942);function b(){var e,t,r;let b=(0,l.useParams)(),h=(0,l.useRouter)(),p=null==b?void 0:b.id,{isAuthenticated:v}=(0,i.t)(),[g,f]=(0,s.useState)(null),[y,j]=(0,s.useState)([]),[N,k]=(0,s.useState)(!0),[w,S]=(0,s.useState)(!1),[A,z]=(0,s.useState)(!1),[E,B]=(0,s.useState)(null),[C,M]=(0,s.useState)(null),[P,I]=(0,s.useState)(null),[_,Z]=(0,s.useState)(""),[U,H]=(0,s.useState)(!1),T=(0,s.useCallback)(async()=>{k(!0);try{let e=await d.Z.get("/barbers/".concat(p));e.data.success?f(e.data.data.barber):f(null)}catch(e){n.ZP.error("Barber not found"),f(null)}finally{k(!1)}},[p]);(0,s.useEffect)(()=>{p&&T()},[p,T]),(0,s.useEffect)(()=>{if(!p||!C){j([]);return}let e=(0,m.WU)(C,"yyyy-MM-dd");S(!0),d.Z.get("/appointments/availability",{params:{barberId:p,date:e}}).then(e=>{var t;e.data.success?j((null===(t=e.data.data)||void 0===t?void 0:t.slots)||[]):j([])}).catch(()=>j([])).finally(()=>S(!1))},[p,C]);let L=async()=>{if(!v){h.push("/login?redirect=/barbers/".concat(p));return}if(!E||!P||!g){n.ZP.error("Please select service, date and time");return}z(!0);try{let e=new Date(P.time);await d.Z.post("/appointments",{barberId:g._id,service:{name:E.name,duration:E.duration,price:E.price},appointmentDate:e.toISOString(),notes:_.trim()||void 0}),H(!0),n.ZP.success("Booking confirmed!")}catch(s){var e,t,r;let a=null==s?void 0:null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:null===(e=t.error)||void 0===e?void 0:e.message;n.ZP.error(a||"Booking failed")}finally{z(!1)}},W=Array.from({length:14},(e,t)=>(0,x.E)((0,u.b)(new Date),t));return N?(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[(0,a.jsx)("nav",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-secondary)]/95 backdrop-blur",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)(o.default,{href:"/barbers",className:"text-xl font-bold text-forest dark:text-gold-light",children:"BarberApp"}),(0,a.jsx)(c.T,{})]})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-16 text-center text-[var(--text-muted)]",children:"Loading barber..."})]}):g?U?(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[(0,a.jsx)("nav",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-secondary)]/95 backdrop-blur",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)(o.default,{href:"/barbers",className:"text-xl font-bold text-forest dark:text-gold-light",children:"BarberApp"}),(0,a.jsx)(c.T,{})]})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-16 text-center max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-xl p-8 shadow-lg",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-3xl mx-auto mb-4",children:"✓"}),(0,a.jsx)("h1",{className:"text-xl font-bold text-[var(--text-primary)] mb-2",children:"Booking confirmed"}),(0,a.jsxs)("p",{className:"text-[var(--text-secondary)] text-sm mb-6",children:["Your appointment with ",g.name," is set for ",C&&(0,m.WU)(C,"PPP")," at ",null==P?void 0:P.display,"."]}),(0,a.jsx)(o.default,{href:"/dashboard",className:"inline-block px-6 py-3 bg-forest dark:bg-gold text-white font-medium rounded-lg hover:opacity-90",children:"View my appointments"})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[(0,a.jsx)("nav",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-secondary)]/95 backdrop-blur",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)(o.default,{href:"/barbers",className:"text-xl font-bold text-forest dark:text-gold-light",children:"BarberApp"}),(0,a.jsx)(c.T,{})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex items-start gap-6 mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-forest/10 dark:bg-gold/10 flex items-center justify-center text-2xl font-semibold text-forest dark:text-gold shrink-0",children:g.name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[var(--text-primary)]",children:g.name}),g.shopName&&(0,a.jsx)("p",{className:"text-[var(--text-secondary)]",children:g.shopName}),g.shopAddress&&(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:g.shopAddress}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("span",{className:"text-amber-500",children:"★"}),(0,a.jsx)("span",{className:"font-medium text-[var(--text-primary)]",children:(g.rating||0).toFixed(1)}),(0,a.jsxs)("span",{className:"text-sm text-[var(--text-muted)]",children:["(",null!==(r=g.totalReviews)&&void 0!==r?r:0," reviews)"]})]}),(null===(e=g.skills)||void 0===e?void 0:e.length)>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:g.skills.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-forest/10 dark:bg-gold/10 text-forest dark:text-gold text-xs rounded-md",children:e},t))}),v&&(0,a.jsx)(o.default,{href:"/chat?barberId=".concat(g._id),className:"inline-flex items-center gap-2 mt-4 px-4 py-2 border border-forest dark:border-gold text-forest dark:text-gold font-medium rounded-lg hover:bg-forest/5 dark:hover:bg-gold/10 transition-colors",children:"Message barber"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("section",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--text-primary)] mb-4",children:"Services"}),(null===(t=g.services)||void 0===t?void 0:t.length)?(0,a.jsx)("ul",{className:"space-y-3",children:g.services.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{type:"button",onClick:()=>B(e),className:"w-full text-left px-4 py-3 rounded-lg border transition-colors ".concat((null==E?void 0:E.name)===e.name?"border-forest dark:border-gold bg-forest/5 dark:bg-gold/10 text-forest dark:text-gold":"border-[var(--border)] hover:bg-[var(--bg-tertiary)]"),children:[(0,a.jsx)("span",{className:"font-medium text-[var(--text-primary)]",children:e.name}),(0,a.jsxs)("span",{className:"block text-sm text-[var(--text-muted)]",children:[e.duration," min \xb7 $",e.price]})]})},t))}):(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"No services listed."})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("section",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--text-primary)] mb-4",children:"Date & time"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)] mb-3",children:"Select a date"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:W.map(e=>{let t=C&&(0,m.WU)(e,"yyyy-MM-dd")===(0,m.WU)(C,"yyyy-MM-dd");return(0,a.jsxs)("button",{type:"button",onClick:()=>M(e),className:"px-3 py-2 rounded-lg text-sm font-medium ".concat(t?"bg-forest dark:bg-gold text-white":"bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:opacity-90"),children:[(0,m.WU)(e,"EEE")," ",(0,m.WU)(e,"d")]},e.toISOString())})}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)] mb-2",children:"Available times"}),w?(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"Loading slots..."}):C?0===y.length?(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"No slots available this day."}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map(e=>{let t=(null==P?void 0:P.time)===e.time;return(0,a.jsx)("button",{type:"button",onClick:()=>I(e),className:"px-4 py-2 rounded-lg text-sm font-medium ".concat(t?"bg-forest dark:bg-gold text-white":"bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:opacity-90"),children:e.display},e.time)})}):(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"Pick a date first."})]}),(0,a.jsxs)("section",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"Notes (optional)"}),(0,a.jsx)("textarea",{value:_,onChange:e=>Z(e.target.value),placeholder:"Special requests...",rows:2,className:"w-full px-4 py-3 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded-lg text-[var(--text-primary)] placeholder-[var(--text-muted)] resize-none"})]}),(0,a.jsx)("button",{type:"button",onClick:L,disabled:!E||!P||A,className:"w-full py-4 bg-forest dark:bg-gold text-white font-semibold rounded-xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:A?"Booking...":v?"Confirm booking":"Sign in to book"})]})]})]})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[(0,a.jsx)("nav",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-secondary)]/95 backdrop-blur",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)(o.default,{href:"/barbers",className:"text-xl font-bold text-forest dark:text-gold-light",children:"BarberApp"}),(0,a.jsx)(c.T,{})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-16 text-center",children:[(0,a.jsx)("p",{className:"text-[var(--text-secondary)] mb-4",children:"Barber not found."}),(0,a.jsx)(o.default,{href:"/barbers",className:"text-forest dark:text-gold font-medium hover:underline",children:"Back to barbers"})]})]})}},7569:function(e,t,r){"use strict";r.d(t,{T:function(){return l}});var a=r(7437),s=r(2265);function l(){let[e,t]=(0,s.useState)(!1),[r,l]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{l(!0),t(document.documentElement.classList.contains("dark"))},[]),(0,s.useEffect)(()=>{r&&(e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")))},[e,r]),(0,s.useEffect)(()=>{if(!r)return;let e=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;t("dark"===e||!e&&a)},[r]),r)?(0,a.jsx)("button",{type:"button",onClick:()=>t(e=>!e),className:"p-2 rounded-brand-md bg-stone-200 dark:bg-stone-700 text-stone-700 dark:text-stone-200 hover:bg-stone-300 dark:hover:bg-stone-600 transition-colors","aria-label":"Toggle theme",children:e?(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"})}):(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}):null}},1837:function(e,t,r){"use strict";let a=r(3464).Z.create({baseURL:"https://barber-app-backend.vercel.app/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let r=localStorage.getItem("auth-storage");if(r)try{var t;let a=JSON.parse(r);(null===(t=a.state)||void 0===t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(a.state.token))}catch(e){console.error("Error parsing auth storage:",e)}}return e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)}),t.Z=a},1217:function(e,t,r){"use strict";r.d(t,{t:function(){return l}});var a=r(9625),s=r(6885);let l=(0,a.Ue)()((0,s.tJ)(e=>({user:null,token:null,isAuthenticated:!1,_hasHydrated:!1,setAuth:(t,r)=>e({user:t,token:r,isAuthenticated:!0}),logout:()=>e({user:null,token:null,isAuthenticated:!1}),setHasHydrated:t=>e({_hasHydrated:t})}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{l.getState().setHasHydrated(!0)}}))}},function(e){e.O(0,[648,64,464,299,167,971,117,744],function(){return e(e.s=3520)}),_N_E=e.O()}]);