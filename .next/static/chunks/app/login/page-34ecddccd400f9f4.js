(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5662:function(e,t,r){Promise.resolve().then(r.bind(r,8991))},8991:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(7437),s=r(2265),n=r(9376),o=r(7648),l=r(9501),i=r(9064),d=r(1837),c=r(1217),u=r(7569);function m(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)().get("redirect")||"/dashboard",{setAuth:r}=(0,c.t)(),[m,h]=(0,s.useState)(!1),{register:x,handleSubmit:p,formState:{errors:g}}=(0,l.cI)(),f=async a=>{h(!0);try{let{user:s,token:n}=(await d.Z.post("/users/login",a)).data.data;r(s,n),i.ZP.success("Login successful!"),e.push(t.startsWith("/")?t:"/dashboard")}catch(e){var s,n,o;i.ZP.error((null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:null===(s=n.error)||void 0===s?void 0:s.message)||"Login failed")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)] flex items-center justify-center px-4 py-12",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(u.T,{})}),(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-brand-lg shadow-brand-lg p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(o.default,{href:"/",className:"text-xl font-bold text-forest dark:text-gold-light",children:"BarberApp"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-[var(--text-primary)] mt-6 mb-2",children:"Welcome back"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"Sign in to your account"})]}),(0,a.jsxs)("form",{onSubmit:p(f),className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",...x("email",{required:"Email is required"}),className:"w-full px-4 py-3 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded-brand-md text-[var(--text-primary)] placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-forest/50 dark:focus:ring-gold/50",placeholder:"your@email.com"}),g.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:g.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",...x("password",{required:"Password is required"}),className:"w-full px-4 py-3 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded-brand-md text-[var(--text-primary)] placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-forest/50 dark:focus:ring-gold/50",placeholder:"••••••••"}),g.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:g.password.message})]}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"w-full py-3 bg-forest dark:bg-gold text-white font-semibold rounded-brand-md hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Signing in...":"Sign in"})]}),(0,a.jsxs)("p",{className:"mt-6 text-center text-sm text-[var(--text-secondary)]",children:["Don't have an account?"," ",(0,a.jsx)(o.default,{href:"/register",className:"text-forest dark:text-gold font-medium hover:underline",children:"Sign up"})]})]})})]})}function h(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-[var(--bg-primary)] flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-[var(--text-muted)]",children:"Loading..."})}),children:(0,a.jsx)(m,{})})}},7569:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var a=r(7437),s=r(2265);function n(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{n(!0),t(document.documentElement.classList.contains("dark"))},[]),(0,s.useEffect)(()=>{r&&(e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")))},[e,r]),(0,s.useEffect)(()=>{if(!r)return;let e=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;t("dark"===e||!e&&a)},[r]),r)?(0,a.jsx)("button",{type:"button",onClick:()=>t(e=>!e),className:"p-2 rounded-brand-md bg-stone-200 dark:bg-stone-700 text-stone-700 dark:text-stone-200 hover:bg-stone-300 dark:hover:bg-stone-600 transition-colors","aria-label":"Toggle theme",children:e?(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"})}):(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}):null}},1837:function(e,t,r){"use strict";let a=r(3464).Z.create({baseURL:"https://barber-app-backend.vercel.app/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let r=localStorage.getItem("auth-storage");if(r)try{var t;let a=JSON.parse(r);(null===(t=a.state)||void 0===t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(a.state.token))}catch(e){console.error("Error parsing auth storage:",e)}}return e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)}),t.Z=a},1217:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var a=r(9625),s=r(6885);let n=(0,a.Ue)()((0,s.tJ)(e=>({user:null,token:null,isAuthenticated:!1,_hasHydrated:!1,setAuth:(t,r)=>e({user:t,token:r,isAuthenticated:!0}),logout:()=>e({user:null,token:null,isAuthenticated:!1}),setHasHydrated:t=>e({_hasHydrated:t})}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{n.getState().setHasHydrated(!0)}}))}},function(e){e.O(0,[648,64,464,299,501,971,117,744],function(){return e(e.s=5662)}),_N_E=e.O()}]);