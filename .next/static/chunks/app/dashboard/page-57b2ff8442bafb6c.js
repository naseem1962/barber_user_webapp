(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5511:function(e,t,s){Promise.resolve().then(s.bind(s,441))},441:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),l=s(9376),n=s(7648),i=s(1217),d=s(1837),o=s(9064);function c(){let e=(0,l.useRouter)(),{user:t,logout:s,isAuthenticated:c}=(0,i.t)(),[h,m]=(0,r.useState)([]),[x,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!c){e.push("/login");return}g()},[c,e]);let g=async()=>{try{let e=await d.Z.get("/appointments/user");m(e.data.data.appointments)}catch(e){o.ZP.error("Failed to fetch appointments")}finally{u(!1)}};return c&&t?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(n.default,{href:"/dashboard",className:"text-2xl font-bold text-primary-700",children:"✂️ BarberApp"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",t.name]}),(0,a.jsx)("button",{onClick:()=>{s(),e.push("/")},className:"px-4 py-2 text-red-600 hover:text-red-700",children:"Logout"})]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-gray-600 text-sm font-medium mb-2",children:"Loyalty Points"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:t.loyaltyPoints||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-gray-600 text-sm font-medium mb-2",children:"Loyalty Level"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary-600 capitalize",children:t.loyaltyLevel||"Bronze"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-gray-600 text-sm font-medium mb-2",children:"Upcoming Appointments"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:h.filter(e=>"pending"===e.status||"confirmed"===e.status).length})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)(n.default,{href:"/barbers",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDD0D"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Find Barbers"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Browse available barbers"})]}),(0,a.jsxs)(n.default,{href:"/ai-recommendation",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83E\uDD16"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"AI Recommendations"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Get style suggestions"})]}),(0,a.jsxs)(n.default,{href:"/try-style",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCF1"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Try Style"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Preview before you cut"})]}),(0,a.jsxs)(n.default,{href:"/chat",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCAC"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Messages"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Chat with barbers"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"My Appointments"})}),x?(0,a.jsx)("div",{className:"p-6 text-center text-gray-600",children:"Loading..."}):0===h.length?(0,a.jsxs)("div",{className:"p-6 text-center text-gray-600",children:["No appointments yet. ",(0,a.jsx)(n.default,{href:"/barbers",className:"text-primary-600 hover:underline",children:"Book one now!"})]}):(0,a.jsx)("div",{className:"divide-y",children:h.map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.barber.name}),e.barber.shopName&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.barber.shopName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.service.name," - $",e.service.price]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.appointmentDate).toLocaleString()})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"confirmed"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})},e._id))})]})]})]}):null}},1837:function(e,t,s){"use strict";let a=s(3464).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let s=localStorage.getItem("auth-storage");if(s)try{var t;let a=JSON.parse(s);(null===(t=a.state)||void 0===t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(a.state.token))}catch(e){console.error("Error parsing auth storage:",e)}}return e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)}),t.Z=a},1217:function(e,t,s){"use strict";s.d(t,{t:function(){return l}});var a=s(9625),r=s(6885);let l=(0,a.Ue)()((0,r.tJ)(e=>({user:null,token:null,isAuthenticated:!1,setAuth:(t,s)=>e({user:t,token:s,isAuthenticated:!0}),logout:()=>e({user:null,token:null,isAuthenticated:!1})}),{name:"auth-storage"}))}},function(e){e.O(0,[648,64,464,299,971,117,744],function(){return e(e.s=5511)}),_N_E=e.O()}]);